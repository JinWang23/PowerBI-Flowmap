{
    "dataRoles": [
        {
            "displayName": "Origin",
            "description": "Addresses/labels to differentiate origin locations",
            "name": "Origin",
            "kind": "Grouping",
            "requiredTypes": [
                {"text": true}
            ]
        },
        {
            "displayName": "Destination",
            "description": "Addresses/labels to differentiate destination locations",
            "name": "Dest",
            "kind": "Grouping",
            "requiredTypes": [
                {"text": true}
            ]
        },
        {
            "displayName": "Value",
            "description": "Non-negative values moving between origins and destinations",
            "name": "Weight",
            "kind": "Measure",
            "requiredTypes": [
                {"numeric": true}
            ]
        },
        {
            "displayName": "Color legend",
            "description": "(Optional) Categorical values mapped to colors",
            "name": "Color",
            "kind": "Grouping"
        },
        {
            "displayName": "Origin latitude",
            "description": "(Optional) Latitudes of the corresponding origins",
            "name": "OLati",
            "kind": "Measure",
            "requiredTypes": [
                {"geography": {
                    "latitude": true,
                    "longitude": true
                }}
            ]
        },
        {
            "displayName": "Origin longitude",
            "description": "(Optional) Longitudes of the corresponding origins",
            "name": "OLong",
            "kind": "Measure",
            "requiredTypes": [
                {"geography": {
                    "latitude": true,
                    "longitude": true
                }}
            ]
        },
        {
            "displayName": "Destination latitude",
            "description": "(Optional) Latitudes of the corresponding destinations",            
            "name": "DLati",
            "kind": "Measure",
            "requiredTypes": [
                {"geography": {
                    "latitude": true,
                    "longitude": true
                }}
            ]
        },
        {
            "displayName": "Destination longitude",
            "description": "(Optional) The longitudes of the corresponding destinations",            
            "name": "DLong",
            "kind": "Measure",
            "requiredTypes": [
                {"geography": {
                    "latitude": true,
                    "longitude": true
                }}
            ]
        },
        {
            "displayName": "Origin name",
            "description": "(Optional) Friendly origin names to display in tooltips. The \"Origin\" field is used by default.",
            "name": "OName",
            "kind": "Measure"
        },
        {
            "displayName": "Destination name",
            "description": "(Optional) Friendly destination names to display in tooltips. The \"Destination\" field is used by default.",
            "name": "DName",
            "kind": "Measure"
        },
        {
            "displayName": "Tooltip",
            "description": "(Optional) Content to show when hovering flows. The \"Value\" field is used by default.",
            "name": "Tooltip",
            "kind": "Measure"
        }
    ],
    "dataViewMappings": [
        {
            "conditions": [
                {
                    "Color" : {"max": 1},
                    "Origin": {"max": 1},
                    "Dest"  : {"max": 1},
                    "Weight": {"max": 1},
                    "OLati" : {"max": 1},
                    "OLong" : {"max": 1},
                    "DLati" : {"max": 1},
                    "DLong" : {"max": 1},
                    "OName" : {"max": 1},
                    "DName" : {"max": 1}
                }                
            ],
            "categorical": {
                "categories": {
                    "select": [
                        {"bind": { "to": "Origin" }},
                        {"bind": { "to": "Color" }},
                        {"bind": { "to": "Dest" }}
                    ],
                    "dataReductionAlgorithm": { "top": { "count": 100000 } }
                },                
                "values": {
                    "select": [
                        {"bind": { "to": "Weight" }},
                        {"bind": { "to": "OLati" }},
                        {"bind": { "to": "OLong" }},
                        {"bind": { "to": "DLati" }},
                        {"bind": { "to": "DLong" }},
                        {"for": { "in": "Tooltip" }},
                        {"for": { "in": "OName" }},
                        {"for": { "in": "DName" }}
                    ]
                }
            }
        }
    ],
    "objects": {
        "legend": {
            "displayName": "Legend",
            "description": "Display legend options",
            "properties": {
                "show": {
                    "displayName": "Show",
                    "type": { "bool": true }
                },
                "position": {
                    "displayName": "Position",
                    "description": "Location for the legend",
                    "type": { "enumeration":  [
                        {"displayName": "Top", "value": "top"},
                        {"displayName": "Bottom", "value": "bot"}
                    ]}
                },
                "customize":{
                    "displayName": "Specify",
                    "description": "visibility of color legend",
                    "type": { "bool": true }
                },
                "fontSize": {
                    "displayName": "Text size",
                    "type": { "formatting": { "fontSize": true } }
                },
                "scale": {
                    "displayName": "Scale",
                    "description": "visibility of scale legend",
                    "type": { "bool": true }
                },
                "label": {
                    "displayName": "• All",
                    "description": "Edit label, (hidden when empty)",
                    "type": { "text": true }
                }
            }
        },
        "color":{
            "displayName": "Flow Color",
            "description": "Change flow colors",
            "properties": {
                "customize":{
                    "displayName": "Specify",
                    "type": { "bool": true}
                },

                "fill":{
                    "displayName": "Default",
                    "type": { "fill": { "solid": { "color": true } } }
                }
            }
        },
        "scale":{
            "displayName": "Flow Width",
            "description": "Change flow scales",
            "properties": {                
                "scale": {
                    "displayName": "Type",
                    "description": "Scale for the values",
                    "type": {
                        "enumeration": [
                            {"displayName": "Log", "value": "log"},
                            {"displayName": "Linear", "value": "linear"}
                        ]
                    }
                },
                "autoScale":{
                    "displayName": "Auto scale",
                    "type": {
                        "bool": true
                    }
                },
                "factor": {
                    "displayName": "• Preferred",
                    "type": {
                        "numeric": true
                    }
                },
                "min": {
                    "displayName": "Minimum",
                    "description": "Minimum width for all flows",
                    "type": {
                        "numeric": true
                    }
                }
            }
        },
        "bubble":{
            "displayName": "Bubble",
            "properties": {
                "show":{
                    "displayName": "Show", 
                    "type": { "bool": true }
                },
                "size":{
                    "displayName": "Scale",
                    "type": { "numeric": true }
                },
                "label": {
                    "displayName": "Label",
                    "description": "How to show bubble labels",
                    "type": {
                        "enumeration": [
                            {"displayName": "Hide", "value": "hide", "description": "hide labels"},
                            {"displayName": "All", "value": "all", "description": "Show all labels"},
                            {"displayName": "By click", "value": "manual", "description": "Click to show/hide"},
                            {"displayName": "None", "value": "none", "description": "Show no labels"}
                        ]
                    }
                },
                "labelOpacity": {
                    "displayName": "Label opacity",
                    "type": { "numeric": true }
                }
            }
        },
        "valueFormat":{
            "displayName": "Tooltip Format",
            "description": "Change the format of values shown in tooltips",
            "properties": {
                "sort":{
                    "displayName": "Sort",
                    "description": "Sorting by the value",
                    "type": { "enumeration": [
                        {"displayName": "Ascending", "value": "asc"},
                        {"displayName": "Descending", "value": "des"}
                    ]}
                },
                "top":{
                    "displayName": "Top",
                    "description": "Truncate the tooltip list",
                    "type": {"numeric": true }
                },
                "notation":{
                    "displayName": "Notation",
                    "type": {"enumeration": [
                            {"displayName": "None", "value": "none"},
                            {"displayName": "Decimal (SI)", "value": "decSi"},
                            {"displayName": "Decimal", "value": "dec"},
                            {"displayName": "Exponent", "value": "exp"},
                            {"displayName": "Percentage", "value": "per"}
                    ]}
                },
                "unit":{
                    "displayName": "Unit",
                    "type": {"enumeration": [
                            {"displayName": "None", "value": "none"},
                            {"displayName": "Thousands", "value": "K"},
                            {"displayName": "Millions", "value": "M"},
                            {"displayName": "Billions", "value": "bn"},
                            {"displayName": "Trillions", "value": "T"}
                    ]}
                },
                "precFix":{
                    "displayName": "Precision",
                    "description": "The number of digits that follow the decimal point",
                    "type": { "numeric": true }
                },
                "precSig":{
                    "displayName": "Precision",
                    "description": "The number of significant digits",
                    "type": { "numeric": true }
                },
                "fix":{
                    "displayName": "Fixed point",
                    "type": { "bool": true }
                },
                "comma":{
                    "displayName": "Comma for thousands",
                    "type": { "bool": true }
                },
                "prefix": {
                    "displayName": "Prefix",
                    "type": { "text": true }
                },
                "postfix": {
                    "displayName": "Postfix",
                    "type": { "text": true }
                }                
            }
        },
        "advance": {
            "displayName": "Advanced",
            "properties": {
                "style":{
                    "displayName": "Flow style",
                    "type": {
                        "enumeration": [
                            {"displayName": "Straight line", "value": "straight"},
                            {"displayName": "Curve", "value": "curve"},
                            {"displayName": "Great circle", "value": "arc"}
                        ]
                    }
                },
                "direction":{
                    "displayName": "Flow type",                    
                    "description": "Switch between in-flow and out-flow",
                    "type": {
                        "enumeration": [
                            {"displayName": "In-flow", "value": "in"},
                            {"displayName": "Out-flow", "value": "out"}
                        ]
                    }
                },
                "relocate":{
                    "displayName": "Relocate",
                    "description": "Drag/Drop to manually change geo-locations",
                    "type": { "bool": true }
                },
                "located":{
                    "displayName": "⁃ Located",
                    "description": "Addresses with geo-locations.",
                    "type": { "bool": true }
                },
                "unlocated":{
                    "displayName": "⁃ Unlocated",
                    "description": "Addresses without geo-locations.",
                    "type": { "bool": true }
                },
                "limit":{
                    "displayName": "Flow limit",
                    "description": "Maximum number of flows displayed simultaneously",
                    "type": {
                        "numeric": true
                    }
                },               
                "cache":{
                    "displayName": "Cache",
                    "description": "Cache geocoding results for next time",
                    "type": { "bool": true }
                },
                "perMap":{
                    "displayName": "Persist coding",
                    "type": { "text": true }
                },
                "perManual":{
                    "displayName": "Persist coding",
                    "type": { "text": true }
                },
                "perGeocoding":{
                    "displayName": "Persist coding",
                    "type": { "text": true }
                }
            }
        },
        "mapControl": {
            "displayName": "Map control",
            "properties": {
                "type": { "displayName": "Type", "type": { "enumeration": [
                    {"displayName": "Aerial", "value": "aerial"},
                    {"displayName": "Road", "value": "road"}
                ]}},
                "lang":{
                    "displayName": "Language", 
                    "description": "The language used in the map",
                    "type": {"enumeration": [
                        {"displayName": "Default", "value": "default" },
                        {"displayName": "Chinese", "value": "zh-HK" },
                        {"displayName": "Czech", "value": "cs-CZ" },
                        {"displayName": "Danish", "value": "da-DK" },
                        {"displayName": "Dutch", "value": "nl-NL" },
                        {"displayName": "English", "value": "en-US" },
                        {"displayName": "Finnish", "value": "fi-FI" },
                        {"displayName": "French", "value": "fr-FR" },
                        {"displayName": "German", "value": "de-DE" },
                        {"displayName": "Italian", "value": "it-IT" },
                        {"displayName": "Japanese", "value": "ja-JP" },
                        {"displayName": "Korean", "value": "Ko-KR" },
                        {"displayName": "Norwegian(Bokmal)", "value": "nb-NO" },
                        {"displayName": "Polish", "value": "pl-PL" },
                        {"displayName": "Portuguese", "value": "pt-BR" },
                        {"displayName": "Russian", "value": "ru-RU" },
                        {"displayName": "Spanish", "value": "es-ES" },
                        {"displayName": "Swedish", "value": "sv-SE" }
                    ]}
                },
                "pan": { "displayName": "Pan", "type": { "bool": true } },
                "zoom": { "displayName": "Zoom", "type": { "bool": true } },
                "scale": { "displayName": "Scale bar", "type": { "bool": true } },
                "cright": { "displayName": "Copyright", "type": { "bool": true } }
            }
        },
        "mapElement": {
            "displayName": "Map element",
            "properties": {
                "forest": { "displayName": "Forest", "type": { "bool": true } },
                "road": { "displayName": "Road", "type": { "enumeration": [
                    {"displayName": "Default", "value": "color"},
                    {"displayName": "Gray w/ label", "value": "gray_label"},
                    {"displayName": "Gray w/o label", "value": "gray"},
                    {"displayName": "Hidden", "value": "hidden"}
                ]}},
                "label": { "displayName": "Label", "type": { "bool": true } },
                "city": { "displayName": "City", "type": { "bool": true } },
                "icon": { "displayName": "Icon", "type": { "bool": true } },
                "area": { "displayName": "Area", "type": { "bool": true } }
            }
        }
    },
    "supportsHighlight": true,
    "suppressDefaultTitle": true
}